(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{104:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return r})),t.d(a,"metadata",(function(){return s})),t.d(a,"rightToc",(function(){return l})),t.d(a,"default",(function(){return c}));var n=t(2),o=t(6),i=(t(0),t(115)),r={id:"nutsAndMaven",title:"Nuts and Maven",sidebar_label:"Nuts and Maven",order:2},s={unversionedId:"intro/nutsAndMaven",id:"intro/nutsAndMaven",isDocsHomePage:!1,title:"Nuts and Maven",description:"You'd still be Maven, yet you gonna be Nuts",source:"@site/docs/intro/nuts-and-maven.md",permalink:"/nuts/docs/intro/nutsAndMaven",editUrl:"https://github.com/thevpc/nuts/edit/master/website/docs/intro/nuts-and-maven.md",sidebar_label:"Nuts and Maven",sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/nuts/docs/"},next:{title:"Installation",permalink:"/nuts/docs/intro/installation"}},l=[{value:"You&#39;d still be Maven, yet you gonna be Nuts",id:"youd-still-be-maven-yet-you-gonna-be-nuts",children:[]},{value:"Nuts Package manager",id:"nuts-package-manager",children:[{value:"Transitive dependency resolution manager",id:"transitive-dependency-resolution-manager",children:[]},{value:"Package manager",id:"package-manager",children:[]},{value:"Feature rich Toolset",id:"feature-rich-toolset",children:[]}]},{value:"Nuts Workspaces",id:"nuts-workspaces",children:[]},{value:"Application Framework",id:"application-framework",children:[]},{value:"Nuts ? Really ?",id:"nuts--really-",children:[]},{value:"Let&#39;s start the journey",id:"lets-start-the-journey",children:[]}],p={rightToc:l};function c(e){var a=e.components,t=Object(o.a)(e,["components"]);return Object(i.a)("wrapper",Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(i.a)("h2",{id:"youd-still-be-maven-yet-you-gonna-be-nuts"},"You'd still be Maven, yet you gonna be Nuts"),Object(i.a)("p",null,"Is there any package manager for Java(TM) applications? You can google for it and you will find that many have\nqueried this on blogs and forums. In most cases responses point to maven and gradle, the tremendous build tools. However,\nboth maven and gradle are build tools, while helping build packages they lack of deployment features. They bundle every\ndependency in every package (think of wars, ears and standalone jars). They do not handle installation or upgrading.\nApache ivy, as well, while competing with maven build tool does not provide more than transitive dependency management.",Object(i.a)("br",{parentName:"p"}),"\n","The main idea behind a package manager is the automation of installation, update, configuration and removal of programs\nor libraries in a coherent manner with the help of a database that manages binaries and metadata. maven, to consider one,\nsticks to the build process, an goes no further."),Object(i.a)("p",null,"You may also ask, \"Why ever, do we need a package manager for Java(TM) applications\". Okkay, let's take some\nexample of Java(TM) applications. How can we install apache netbeans IDE ? The proper way is to browse to the editor's\nwebsite, select the proper mirror if applicable, download the archive, uncompress it, chmod the main binary (i'm a linux\nguy) and adjust PATH environment variable to point to this binary; Quite a pain. What do we do to update it now? Hopefully, the IDE has a solid plugin architecture and an in-app update/upgrade tool that will help the process (in a gui manner of course). The same applies to eclipse and apache tomcat with the exception that apache tomcat does not even bundle an in-app update tool. The same applies too when dealing with other operating systems (Windows, MacOS, ...). Managing Java(TM) applications is far from helpful."),Object(i.a)("p",null,"Furthermore, as Java(TM) applications are (usually) not bundled in OS-aware installers, you will end up with a spaguetty\nhome directory with applications installed all over your partitions, which - simply - does not mix up with all the work\nOS-developers have done to separate logs from data, from temporary files, from binaries, etc. Each application will handle it's files in a very specific manner that would make it hard to manage own's disk (automatic archive/backup/restore) or roaming applications across machines, etc."),Object(i.a)("p",null,"Moreover, in a world of containers and devops, deployments of Java(TM) applications need to be automatable and reproducible\nwith the highest level of simplicity, configurability and integrability. Installing tomcat on a custom port should not not\nbe as painful as using a custom Docker image or a complicated Dockerfile or even a custom apache tomcat bundle. "),Object(i.a)("p",null,"When we recall that Java(TM) is the one language that has the more versatile number of libraries, frameworks and tools,\nI find it annoying not to have a decent package manager to make the leap and provide facilities I find prime in other\nlanguages and platforms (",Object(i.a)("inlineCode",{parentName:"p"},"pip"),"/",Object(i.a)("inlineCode",{parentName:"p"},"python"),", ",Object(i.a)("inlineCode",{parentName:"p"},"npm"),"/",Object(i.a)("inlineCode",{parentName:"p"},"nodejs"),"/",Object(i.a)("inlineCode",{parentName:"p"},"javascript"),") and most of linux distribution (",Object(i.a)("inlineCode",{parentName:"p"},"zypper"),"/",Object(i.a)("inlineCode",{parentName:"p"},"opensuse"),", ",Object(i.a)("inlineCode",{parentName:"p"},"dnf"),"/",Object(i.a)("inlineCode",{parentName:"p"},"redhat"),"\n",Object(i.a)("inlineCode",{parentName:"p"},"apt-get"),"/",Object(i.a)("inlineCode",{parentName:"p"},"debian"),"/",Object(i.a)("inlineCode",{parentName:"p"},"ubuntu"),")"),Object(i.a)("p",null,"Hence I'm introducing here a humble attempt to provide a tiny (300ko) yet powerful package manager for Java(TM)\napplications (but not only) that should handle jar files seamlessly (with little or no modification) and that comes with\na set of portable tools that makes this management at a higher level. I'm not talking about redefining the wheel.\nI'm aware that many tools such as maven, are already very good at what they do, I just needed to make the leap for deployments.\nYou will be able to deploy your applications without bundling all of their dependencies : ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," will take care of that. "),Object(i.a)("p",null,"So you'd still be maven, yet you gonna be ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts")),"."),Object(i.a)("h2",{id:"nuts-package-manager"},"Nuts Package manager"),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is actually :"),Object(i.a)("ul",null,Object(i.a)("li",{parentName:"ul"},"a transitive dependency resolution manager"),Object(i.a)("li",{parentName:"ul"},"a package manager (backports maven and supports maven repositories)"),Object(i.a)("li",{parentName:"ul"},"an automation tool"),Object(i.a)("li",{parentName:"ul"},"a feature rich toolset"),Object(i.a)("li",{parentName:"ul"},"an application framework"),Object(i.a)("li",{parentName:"ul"},"decentralized"),Object(i.a)("li",{parentName:"ul"},"sandbox based")),Object(i.a)("h3",{id:"transitive-dependency-resolution-manager"},"Transitive dependency resolution manager"),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," calculates transitive dependencies of an application to resolve other packages to download at install or\nupdate/upgrade time. So typically, deployed applications should no more bundle their dependencies within the deployed archive.\nThus we avoid the annoying fat jars (using maven plugins like 'maven-assembly-plugin' and 'maven-shade-plugin') and lib folders\n(using 'maven-dependency-plugin'). It will also reuse dependencies and packages across multiple installed applications\nand hence save disk space, and network bandwidth."),Object(i.a)("p",null,"All what ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," needs is a descriptor file withing the jar file that defines the immediate dependencies. It then\ncalculates all transitive dependencies automatically. And guess what, all maven built jars already contain that\ndescriptor : the pom.xml file. So basically all maven applications are already ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," aware applications."),Object(i.a)("h3",{id:"package-manager"},"Package manager"),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," uses this dependency resolution to help install, update, remove and search for applications. To be able to use an\napplication, it has to be installed and configured with all of its dependencies. This is the main goal of ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts")),".\nWhen we ask to install tomcat, for instance, it will search for the best version in registered repositories, download it,\nand configure it to be ready for execution. The best version is not always the the latest one. Actually it would be the\nlatest valid one, thus the latest one that matches some constraints.",Object(i.a)("br",{parentName:"p"}),"\n","Constraints include the version of the running java (tomcat 8 works on java 7 but not 6 for instance), the running operating\nsystem (windows, linux, ... to help selecting the proper binaries), may be the hardware architecture or even the\noperating distribution (for linux based systems). Constraints will filter the search result to include the best, the most\naccurate version to install. Installation also would configure the installed application and even may run another\nartifact to help this configuration."),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," also handles search for newer versions and update the installed application at request. Updating a software does not\nnecessarily delete the older version. Both version can coexist and it is up to the user the decide whether or\nnot to retain both versions. Indeed, one of the key features of ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is the ability to install and hence run multiple versions\nof the same software in parallel. You would never see an error message telling you can't install that software because a\ndependency of it is installed with different version. All software and all libraries can coexist peacefully."),Object(i.a)("p",null,"Software artifacts are stored in repositories. ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," can handle multiple repositories, remote and local ones.\nInstalled software are stored in special local repositories. Supported repositories include maven repositories and github\nrepositories. Actually a fresh installation of ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is configured with maven central repository so that, you already have access\nto thousands of installable artifacts."),Object(i.a)("p",null,"At some point, you may need to uninstall an artifact and that's to undo the artifact installation.",Object(i.a)("br",{parentName:"p"}),"\n","Installation will help you choose between uninstalling binaries only and keeping data/config files or remove permanently\nall of the artifact files. In all ways, uninstalling will not affect other artifacts that use the same dependencies if ever. "),Object(i.a)("h3",{id:"feature-rich-toolset"},"Feature rich Toolset"),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is intended to be used either by human users or by robots and other applications. It comes with portable,\nfeature rich toolset, a versatile library and a handy parsable result. "),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is mainly a commandline program that helps installing, uninstalling, searching, updating and running artifacts.\nTo help desktop integration, ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," installs by default a set of other companion tools such as ",Object(i.a)("inlineCode",{parentName:"p"},"nsh")," (a portable\nbash-compatible implementation), and ",Object(i.a)("inlineCode",{parentName:"p"},"nadmin")," (an administration tool for ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," to configure users, authorizations, repositories,\ncreate scripts,...);"),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},"nsh")," brings the bash  facilities to all environments (windows included) in a very portable manner. Besides it integrates\nwell with the installed ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," version. Several common commands are ported to ",Object(i.a)("inlineCode",{parentName:"p"},"nsh")," such as ",Object(i.a)("inlineCode",{parentName:"p"},"cat"),",",Object(i.a)("inlineCode",{parentName:"p"},"head"),", and ",Object(i.a)("inlineCode",{parentName:"p"},"ssh"),",\nas well as core features like pipes, redirection and scripts. "),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},"nadmin")," is intended for configuring ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," workspaces, managing repositories and users. It helps also configuring\nsub commands and aliases to make ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," usage even easier."),Object(i.a)("h2",{id:"nuts-workspaces"},"Nuts Workspaces"),Object(i.a)("p",null,"One of the key features of ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is the ability to support multiple isolated workspaces, each managing it's own\nrepositories, applications and libraries; each defining it's sandbox security constraints.\nThus non-root installation is made easy while it remains possible to overlap between workspaces by sharing repositories.\nRoaming is also supported, so that a workspaces can be copied/moved across machines."),Object(i.a)("h2",{id:"application-framework"},"Application Framework"),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},"nuts")," can also be embedded as a library in you application. This enables you to wire classes on the fly by its network\ndependency-aware classloading mechanisms. The library allows as well building solid and well integrated applications,\nmainly console applications. Indeed, ",Object(i.a)("inlineCode",{parentName:"p"},"nuts")," comes with rich outputs that support automatic formatting to json, xml, table,\ntree and plain texts. It handles standard File Systems layouts; XDG Base Directory Specification is implemented\nfor linux and MacOS. A compatible one is also implemented in Windows systems. And of course, it helps seamlessly install,\nupdate and remove events. "),Object(i.a)("h2",{id:"nuts--really-"},"Nuts ? Really ?"),Object(i.a)("p",null,"In every palace you will find the wizard and the fool, the ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"maven"))," and the ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts")),"; There's no\nexception in the java kingdom! If you do prefer acronyms here is another reason : ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," stands for Network\nUpdatable Things Services. It should be able to facilitate things deployment and update over the\nwire where things resolve here to any piece of software depending (or not) on other piece of software."),Object(i.a)("h2",{id:"lets-start-the-journey"},"Let's start the journey"),Object(i.a)("p",null,"we start by opening a new terminal (termm, konsole or whatever you prefer) then download ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," using this command :\nOn linux/MacOS system we issue :"),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"wget https://github.com/thevpc/vpc-public-maven/raw/master/net/vpc/app/nuts/nuts/0.8.3/nuts-0.8.3.jar\n")),Object(i.a)("p",null,"Let's check that java is installed :"),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"java --version\n")),Object(i.a)("p",null,"Now we run ",Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"java -jar nuts-0.8.3.jar -zy\n")),Object(i.a)("p",null,"We used the flags ",Object(i.a)("inlineCode",{parentName:"p"},"-y")," to auto-confirm and ",Object(i.a)("inlineCode",{parentName:"p"},"-z")," to ignore cached binaries (combined here as ",Object(i.a)("inlineCode",{parentName:"p"},"-zy"),").\nThese flags are not required. We use them here to make installation work in all cases.\nInstallation may last several minutes as it will download all required dependencies, companions and tools."),Object(i.a)("p",null,"You should then see this message"),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"Welcome to nuts. Yeah, it is working...\n")),Object(i.a)("p",null,Object(i.a)("strong",{parentName:"p"},Object(i.a)("inlineCode",{parentName:"strong"},"nuts"))," is well installed, just restart your terminal."),Object(i.a)("p",null,"Now we will install apache tomcat. So in your terminal type:"),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"nuts install ntomcat\nnuts ntomcat start --set-port 9090\n")),Object(i.a)("p",null,"The first two commands will install tomcat helper tool (ntomcat) that will download latest version of tomcat and configure it to 9090 port.\nThe last command will start tomcat.\nLet's check tomcat status now"),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"nuts tomcat status\n")),Object(i.a)("p",null,"Now we will do the same with derby database. We will install it and run it."),Object(i.a)("pre",null,Object(i.a)("code",Object(n.a)({parentName:"pre"},{}),"nuts install nderby\nnuts nderby start\n")),Object(i.a)("p",null,"As you can see, simple commands are all you need to download, install, configure and run tomcat or derby or any application that is deployed in the maven repository."),Object(i.a)("p",null,"So please visit ",Object(i.a)("inlineCode",{parentName:"p"},"nuts")," ",Object(i.a)("a",Object(n.a)({parentName:"p"},{href:"https://thevpc.github.com/nuts"}),"website")," or ",Object(i.a)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/thevpc/nuts"}),"github repository")," for more information."))}c.isMDXComponent=!0},115:function(e,a,t){"use strict";t.d(a,"a",(function(){return m}));var n=t(0),o=t.n(n);function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=o.a.createContext({}),c=function(e){var a=o.a.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):s(s({},a),e)),t},d={inlineCode:"code",wrapper:function(e){var a=e.children;return o.a.createElement(o.a.Fragment,{},a)}},u=o.a.forwardRef((function(e,a){var t=e.components,n=e.mdxType,i=e.originalType,r=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=n,h=u["".concat(r,".").concat(m)]||u[m]||d[m]||i;return t?o.a.createElement(h,s(s({ref:a},p),{},{components:t})):o.a.createElement(h,s({ref:a},p))}));function m(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var i=t.length,r=new Array(i);r[0]=u;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,r[1]=s;for(var p=2;p<i;p++)r[p]=t[p];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);